datasources:
  datasources.yaml:
    apiVersion: 1
    datasources:
    - name: Prometheus  ## Configure additional grafana datasources (passed through tpl)
      type: prometheus  ## ref: http://docs.grafana.org/administration/provisioning/#datasources
      url: http://prometheus-server
      access: proxy
    - name: Loki
      type: loki
      access: proxy
      url: http://loki.monitoring.svc:3100
      access: proxy
      
dashboardProviders:
 dashboardproviders.yaml:
   apiVersion: 1
   providers:
   - name: 'default'
     orgId: 1
     folder: ''
     type: file
     disableDeletion: false
     editable: true
     options:
       path: /var/lib/grafana/dashboards/default

dashboards:
  default:
    loki:
        json: |
          ${indent(8, file("${path.module}/monitoring/dashboards/lokilogsquicksearch.json"))}
    kubernetes:
      gntId: 10000
      version: 1
